<p id="notice"><%= notice %></p>

<div class="show-product">
  <p>
    <strong>Name:</strong>
    <%= @product.name %>
  </p>

  <p>
    <strong>Category:</strong>
    <%= @product.category %>
  </p>

  <p>
    <strong>Description:</strong>
    <%= @product.description %>
  </p>

  <p>
    <strong>Quantity:</strong>
    <%= @product.quantity %>
  </p>

  <p>
    <strong>Price:</strong>
    <%= @product.price %>
  </p>

  <p>
    <strong>Brand:</strong>
    <%= @product.brand %>
  </p>

  <p>
    <strong>Sold:</strong>
    <%= @product.sold %>
  </p>

  <p>
    <strong>Picture:</strong>
    
  </p>


<button data-stripe="payment">Buy ticket <%= number_to_currency(@product.price) %></button>

<%= link_to 'Back', products_path %>

<script src="https://js.stripe.com/v3/"></script>

<script>
  document.querySelector("[data-stripe='payment']").addEventListener("click", () => {
    const stripe = Stripe("<%= Rails.application.credentials.dig(:stripe, :public_key) %>");
    stripe.redirectToCheckout({
      sessionId: "<%= @session_id %>"
      });
    });
</script>

</div>

<%= link_to 'Edit', edit_product_path(@product) %> |
<%= link_to 'Back', products_path %>
